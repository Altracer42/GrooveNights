<ActorFrame><children>
			
<ActorFrame	InitCommand="queuecommand,Start;"
			StartCommand="%function(self)
			InitScreen('GradeModels');
			gnSameGrade = gnSameGrade + 1;
			self:queuecommand('SameGradeCheck');
			end"
			SameGradeCheckCommand="%function(self)
			if gnSameGrade == 2 then
				self:hibernate(20000);
				end
			end">
	<children>


				
				
				
				
<!--Quad Layer to dim the screen while the special result plays-->
		<ActorFrame
		InitCommand="queuecommand,Start;"
		StartCommand="%function(self)
		if not getSpecialUSB() then
			self:hibernate(200000);
			end
		end"><children>
			
			<Layer Type="Quad"
			InitCommand="%function(self)
			self:diffusealpha(0);
			if GAMESTATE:IsHumanPlayer(PLAYER_1) then
				self:x(245+AddFromCenter('x','Normal',PLAYER_1));
				else
				self:x(-64+AddFromCenter('x','Normal',PLAYER_2));
				end
			if GAMESTATE:IsHumanPlayer(PLAYER_1) then self:y(40+AddFromCenter('y','Normal',PLAYER_1)); else  self:y(40+AddFromCenter('y','Normal',PLAYER_2)); end
			self:queuecommand('ColourIt');
			end"
			ColourItCommand="diffuse,0,0,0,1;zoom,2;decelerate,0.5;zoom,1;diffuse,0,0,0,0.8;zoom,5000;queuecommand,Duration;"
			DurationCommand="%function(self)
				if gnDimBackgroundSeconds == nil then
					gnDimBackgroundSeconds = 0.1;
					end
				if gnDimBackgroundSeconds == 0 then
					gnDimBackgroundSeconds = 0.1;
					end
			self:sleep(gnDimBackgroundSeconds);
			self:linear(1);
			self:diffusealpha(0);
			end"
			OffCommand="accelerate,0.3;zoom,0;"
			/>
			
		</children></ActorFrame>
		
<!--Special Video to Play-->
		<Layer File="@'../../Sounds/'..getCustomNormalImageOrVideo()"
		InitCommand="%function(self)
		
		if GAMESTATE:IsPlayerEnabled(PLAYER_1) then
				self:x(244+AddFromCenter('x','Normal',PLAYER_1)-42);
				self:y(40+AddFromCenter('y','Normal',PLAYER_1)+108);
				if GAMESTATE:PlayerUsingBothSides(PLAYER_1) then
					self:addx(29);
					end
				else
				self:x(-66+AddFromCenter('x','Normal',PLAYER_2)-130);
				self:y(40+AddFromCenter('y','Normal',PLAYER_2)+108);
				if GAMESTATE:PlayerUsingBothSides(PLAYER_2) then
					self:addx(-38);
					end
				end
		self:diffusealpha(0);
		self:zoom(2);
		self:decelerate(0.5);
		self:diffusealpha(gnDiffusealpha);
		self:zoom(gnZoom);
		if gnSoundCheck == true then
			gnPath = getCustomNormalSound();
			SOUND:PlayOnce(gnPath);
			gnSoundCheck = false;
			end
				if gnOnScreenSeconds == nil then
					gnOnScreenSeconds = 0.1;
					end
				if gnOnScreenSeconds == 0 then
					gnOnScreenSeconds = 0.1;
					end
		self:sleep(gnOnScreenSeconds);
		self:linear(1);
		self:diffusealpha(0)
		end;"
		/>
		
		
	</children>
</ActorFrame>




<ActorFrame OnCommand="zoom,0.40;x,-2;y,6;wag;EffectMagnitude,0,0,2;" InitCommand="%function(self) self:hibernate(gnOnScreenSeconds); end"><children>
<!-- Grade Sound-->
<Layer Type="Quad" InitCommand="diffusealpha,0;zoom,SCREEN_WIDTH*20;sleep,0.2;queuecommand,PlaySound1"
PlaySound1Command="%function(self)
	if not getSpecialUSB() then
		gnSound = GradeSound(0);
		SOUND:PlayOnce( gnSound )
		end
	self:diffusealpha(0.075);
	self:accelerate(0.25);
	self:diffusealpha(0);
end"
/>
<!--Grade Graphics-->

<Layer
	File="GradeTier0005"
	InitCommand="%function(self)
	self:queuecommand('Start');
	end"
	StartCommand="diffusealpha,0;zoom,0;sleep,0.2;decelerate,0.2;zoom,1.5;diffusealpha,1;accelerate,0.2;zoom,1;decelerate,0.1;zoom,0.9;diffusealpha,0.8;accelerate,0.1;zoom,1;diffusealpha,1;"
/>

<!--Extra Effects-->
<!--Grade Explosion-->
<ActorFrame OnCommand="y,-32;x,3;zoom,1.2;"><children>
<Layer
	File="../Combo 1000milestone/arrowswoosh"
	InitCommand="%function(self)
	self:queuecommand('Start');
	end"
	StartCommand="diffusealpha,0;x,30;y,-20;zoom,2;sleep,0.2;diffusealpha,1;decelerate,0.3;addx,100;diffusealpha,0;"
/>

<Layer
	File="../Combo 1000milestone/arrowswoosh"
	InitCommand="%function(self)
	self:queuecommand('Start');
	end"
	StartCommand="diffusealpha,0;rotationy,180;x,-30;y,-20;zoom,2;sleep,0.2;diffusealpha,1;decelerate,0.3;addx,-100;diffusealpha,0;"
/>


<Layer
	File="../Combo 1000milestone/arrowswoosh"
	InitCommand="%function(self)
	self:queuecommand('Start');
	end"
	StartCommand="diffusealpha,0;rotationz,270;y,-30;zoom,2;sleep,0.2;diffusealpha,1;decelerate,0.3;addy,-100;diffusealpha,0;"
/>

<Layer
	File="../Combo 1000milestone/arrowswoosh"
	InitCommand="%function(self)
	self:queuecommand('Start');
	end"
	StartCommand="diffusealpha,0;rotationz,90;y,30;zoom,2;sleep,0.2;diffusealpha,1;decelerate,0.3;addy,100;diffusealpha,0;"
/>


<Layer
	File="../Combo 100milestone/explosion"
	InitCommand="%function(self)
	self:queuecommand('Start');
	end"
	StartCommand="diffusealpha,0;blend,add;rotationz,0;zoom,2;sleep,0.2;diffusealpha,0.5;linear,0.5;rotationz,-90;zoom,1;diffusealpha,0"
/>

<Layer
	File="../Combo 100milestone/explosion"
	InitCommand="%function(self)
	self:queuecommand('Start');
	end"
	StartCommand="diffusealpha,0;blend,add;rotationz,0;zoom,2;sleep,0.2;diffusealpha,0.5;linear,0.5;rotationz,90;zoom,1;diffusealpha,0"
/>
</children></ActorFrame>



</children></ActorFrame>
